---
version: "2"

services:
  sftp:
    image: atmoz/sftp

    volumes:
      - ./tmp/sftp-store-root:/home/blob

    command: "blob:password:::sftp_tests"

  minio:
    image: minio/minio

    environment:
      - MINIO_ACCESS_KEY=my_access_key
      - MINIO_SECRET_KEY=my_secret_key

    volumes:
      - ./tmp/s3-store-root:/data

    command: "server /data"

  sbt:
    image: hseeberger/scala-sbt:8u242_1.3.8_2.12.10

    entrypoint: /usr/bin/sbt
    working_dir: /opt/app

    volumes:
    - ~/.sbt:/root/.sbt
    - ~/.ivy2:/root/.ivy2
    - .:/opt/app

    links:
      - sftp:sftp-container
      - minio:minio-container